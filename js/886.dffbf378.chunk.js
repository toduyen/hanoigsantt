"use strict";(self.webpackChunkcomit_admin=self.webpackChunkcomit_admin||[]).push([[886],{2886:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var r=n(5861),a=n(885),c=n(4687),l=n.n(c),o=n(7294),i=n(5725),u=n(9379),s=n(5167),m=n(6272),d=n(6914),f=n(2895),g=n(7794),Z=n(2982),E=n(2887),p=n(9062),h=n(7608),k=n(9792),x=n(6334);function b(e){var t=e.camera,n=e.index,r=e.orderIndex,c=e.isDisableCheckbox,l=e.handleUpdateIndex,s=(0,o.useState)(r),m=(0,a.Z)(s,2),d=m[0],f=m[1],g=(0,o.useState)(c&&0===d),Z=(0,a.Z)(g,2),p=Z[0],h=Z[1];(0,o.useEffect)((function(){f(r)}),[r]),(0,o.useEffect)((function(){h(c&&0===d)}),[c]);return o.createElement(u.Z,{display:"flex",mb:2,md:2,lg:2,style:{alignItems:"center"}},o.createElement(i.ZP,{item:!0,xs:2},o.createElement(E.Z,{checked:d>0,onChange:function(e){return function(e){var t=e.target.checked?1:0;f(t),l(n,t)}(e)},disabled:p})),o.createElement(i.ZP,{item:!0,xs:5,md:5,lg:5},o.createElement(x.Z,{style:{fontSize:"18px"}},t.name)),o.createElement(i.ZP,{item:!0,xs:5,md:5,lg:5,style:{alignItems:"center"}},o.createElement(u.Z,{style:{width:"50px",display:"flex"}},o.createElement(k.Z,{disabled:0===d,value:d,onChange:function(e){f(e.target.value),l(n,parseInt(e.target.value,10))}}))))}var v=n(5295),S=n(4675);function w(e){var t=e.title,n=e.handleClose,r=e.children,a=e.handleSaveData;return o.createElement(u.Z,{px:1,width:"100%",height:"100vh",mx:"auto"},o.createElement(i.ZP,{container:!0,justifyContent:"center",alignItems:"center",height:"100%"},o.createElement(i.ZP,{item:!0,xs:11,sm:9,md:9,lg:6,xl:4},o.createElement(v.Z,null,o.createElement(u.Z,{variant:"gradient",bgColor:"info",borderRadius:"lg",coloredShadow:"info",mx:2,mt:-3,p:2,mb:1,textAlign:"center"},o.createElement(x.Z,{variant:"h4",fontWeight:"medium",color:"white",mt:1},t)),o.createElement(u.Z,{pt:4,pb:3,px:3},o.createElement(u.Z,{component:"form",role:"form"},r,o.createElement(u.Z,{mt:4,mb:1,display:"flex"},o.createElement(S.Z,{variant:"gradient",color:"info",fullWidth:!0,onClick:a},"Lưu"),o.createElement(u.Z,{sx:{width:"30px"}}),o.createElement(S.Z,{variant:"gradient",color:"error",fullWidth:!0,onClick:n},"Hủy bỏ"))))))))}w.defaultProps={children:o.createElement("div",null),handleClose:function(){}};var P=w,y=n(8533),I=n(8042),C=n(4956);var N=function(e){var t=e.handleClose,n=(0,o.useState)([]),c=(0,a.Z)(n,2),s=c[0],m=c[1],d=(0,o.useState)([]),f=(0,a.Z)(d,2),g=f[0],k=f[1],x=(0,o.useState)(!0),v=(0,a.Z)(x,2),S=v[0],w=v[1],N=[],U=(0,o.useState)(0),T=(0,a.Z)(U,2),R=T[0],z=T[1],D=(0,o.useState)(0),O=(0,a.Z)(D,2),W=O[0],J=O[1],L=(0,o.useState)(null),A=(0,a.Z)(L,2),F=A[0],H=A[1],M=(0,o.useState)(null),j=(0,a.Z)(M,2),q=j[0],_=j[1],B=(0,I.b3)(),K=(0,a.Z)(B,1)[0];(0,o.useEffect)((function(){K.token&&H(K.token)}),[K.token]);var Q=function(e,t){(s.filter((function(e){return e>0})).length<parseInt(h.AN,10)||0===t||s[e]>0)&&(s[e]=t),m(s),w(s.filter((function(e){return e>0})).length>=parseInt(h.AN,10))},Y=(0,o.useCallback)(function(){var e=(0,r.Z)(l().mark((function e(t){var n,r,a,c,o,i,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.page,r=t.size,a=t.search,c=t.reset,o=void 0!==c&&c,!F){e.next=6;break}return e.next=4,(0,C.kW)({token:F,page:n,size:r,search:a,status:"active"});case 4:null!==(i=e.sent).data&&(k(o?i.data.data:function(e){return[].concat((0,Z.Z)(e),(0,Z.Z)(i.data.data))}),J(i.data.pageCount),null!==(u=localStorage.getItem(h.aR))&&JSON.parse(u).length===i.data.itemCount&&_(!0));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[F]);return(0,o.useEffect)((0,r.Z)(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0===q?m(g.map((function(e){return 1}))):null!==(t=localStorage.getItem(h.aR))?(n=JSON.parse(t),r=[],g.forEach((function(e,t){if(t<s.length)r.push(s[t]);else{var a=n.filter((function(t){return t.camera===e.id}));a.length>0?r.push(a[0].orderIndex):r.push(0)}})),m(r)):m(g.map((function(e){return 0})));case 1:case"end":return e.stop()}}),e)}))),[g]),(0,o.useEffect)((function(){!0===q?Y({page:0,size:Math.pow(10,6),reset:!0}).catch(console.error):!1===q&&m(g.map((function(e){return 0})))}),[q]),(0,o.useEffect)((function(){w(s.filter((function(e){return e>0})).length>=parseInt(h.AN,10))}),[s]),(0,o.useEffect)((function(){Y({page:0,size:10}).catch(console.error)}),[F]),o.createElement(P,{title:"Chọn camera hiển thị dashboard",handleClose:t,handleSaveData:function(){s.forEach((function(e,t){e>0&&N.push({camera:g[t].id,orderIndex:e})})),N.sort((function(e,t){return e.orderIndex-t.orderIndex}));var e=N.map((function(e){return e.camera}));0===e.length?localStorage.removeItem(h.nD):localStorage.setItem(h.nD,JSON.stringify(e)),localStorage.setItem(h.aR,JSON.stringify(N)),t()}},o.createElement(u.Z,null,o.createElement(i.ZP,{container:!0,mb:2},o.createElement(i.ZP,{item:!0,xs:2,md:2,lg:2},o.createElement(E.Z,{checked:q||!1,onChange:function(e){return function(e){_(e.target.checked)}(e)}})),o.createElement(i.ZP,{item:!0,xs:5,md:5,lg:5},"Tên camera"),o.createElement(i.ZP,{item:!0,xs:5,md:5,lg:5},"Thứ tự hiển thị")),o.createElement("div",{id:"cameraListScroll",style:{maxHeight:"55vh",overflowY:"auto",overflowX:"hidden"}},o.createElement(y.Z,{dataLength:s.length,next:(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(t=R+1),e.next=4,Y({page:t,size:10});case 4:case"end":return e.stop()}}),e)}))),hasMore:R<W-1,loader:o.createElement(u.Z,null,o.createElement(p.Z,{color:"info"})),scrollableTarget:"cameraListScroll",style:{overflow:"unset"}},s.map((function(e,t){return o.createElement(o.Fragment,{key:"".concat(e,"_").concat(t)},o.createElement(b,{camera:g[t],index:t,orderIndex:e,isDisableCheckbox:S,handleUpdateIndex:Q}))}))))))},U=n(6982),T=n(5697),R=n.n(T);function z(e){var t=e.color,n=e.title,r=e.count,a=e.icon;return o.createElement(v.Z,null,o.createElement(u.Z,{display:"flex",justifyContent:"space-between",pt:1,px:2,whiteSpace:"nowrap"},o.createElement(u.Z,{variant:"gradient",bgColor:t,color:"light"===t?"dark":"white",coloredShadow:t,borderRadius:"xl",display:"flex",justifyContent:"center",alignItems:"center",width:"4rem",height:"4rem",mt:-3},o.createElement(f.Z,{fontSize:"medium",color:"inherit"},a)),o.createElement(u.Z,{textAlign:"right",lineHeight:1.25,paddingBottom:"2rem"},o.createElement(x.Z,{variant:"button",fontWeight:"light",color:"text"},n),o.createElement(x.Z,{variant:"h4"},r))))}z.defaultProps={color:"info",percentage:{color:"success",text:"",label:""}},z.propTypes={color:R().oneOf(["primary","secondary","info","success","warning","error","light","dark"]),title:R().string.isRequired,count:R().oneOfType([R().string,R().number]).isRequired,percentage:R().shape({color:R().oneOf(["primary","secondary","info","success","warning","error","dark","white"]),amount:R().oneOfType([R().string,R().number]),label:R().string}),icon:R().node.isRequired};var D=z,O=n(4607),W=n(2792),J=n(5963);function L(){var e=(0,I.b3)(),t=(0,a.Z)(e,1)[0],n=(0,o.useState)(0),c=(0,a.Z)(n,2),s=c[0],m=c[1],d=(0,o.useState)(0),f=(0,a.Z)(d,2),g=f[0],Z=f[1],E=(0,o.useState)(0),p=(0,a.Z)(E,2),h=p[0],k=p[1];return(0,o.useEffect)((0,r.Z)(l().mark((function e(){var n,r,c,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.token){e.next=11;break}return e.next=3,Promise.all([(0,J.fC)(t.token),(0,O.Ix)(t.token),(0,W.N)(t.token)]);case 3:n=e.sent,r=(0,a.Z)(n,3),c=r[0],o=r[1],i=r[2],null!==c.data&&m(c.data.length),null!==o.data&&Z(o.data),null!==i.data&&k(i.data.length);case 11:case"end":return e.stop()}}),e)}))),[t.token]),o.createElement(u.Z,{py:3},o.createElement(i.ZP,{container:!0,spacing:3},o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"dark",icon:"weekend",title:"Tổng số tổ chức",count:s}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{icon:"leaderboard",title:"Tổng số tài khoản",count:g}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"success",icon:"store",title:"Tổng số tính năng",count:h})))))}var A=n(2862),F=n(1598);function H(e){var t=e.camera,n=e.numberInRow,c=(0,I.b3)(),u=(0,a.Z)(c,1)[0],s=(0,o.useState)(null),m=(0,a.Z)(s,2),d=m[0],f=m[1],g=(0,o.useState)(!0),Z=(0,a.Z)(g,2),E=Z[0],p=Z[1];(0,o.useEffect)((0,r.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==(n=localStorage.getItem(h.nD))&&t&&JSON.parse(n).filter((function(e){return e===t.id})).length>0?(f("".concat(A.w4,":").concat(t.taken,"/bgr/").concat(t.id)),p(!1)):(f(null),p(!0));case 2:case"end":return e.stop()}}),e)}))),[t,localStorage.getItem(h.nD)]);var k=function(){var e=(0,r.Z)(l().mark((function e(n){var r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),p(!1),null!==u.currentUser&&null!==t?(f("".concat(A.w4,":").concat(t.taken,"/bgr/").concat(t.id)),r=localStorage.getItem(h.nD),(a=(a=null!==r?JSON.parse(r):[]).filter((function(e){return e!==t.id}))).push(t.id),localStorage.setItem(h.nD,JSON.stringify(a))):f(null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!==t?o.createElement(i.ZP,{key:"".concat(t.name,"_").concat(t.id),item:!0,xs:12/n,md:12/n,lg:12/n,style:{position:"relative"}},o.createElement(F.Z,{handlePlay:k,handlePause:function(){if(p(!0),t){var e=localStorage.getItem(h.nD);if(null!==e){var n=JSON.parse(e);n=n.filter((function(e){return e!==t.id})),localStorage.setItem(h.nD,JSON.stringify(n))}}},pause:E,imageData:d,cameraName:t.name})):o.createElement("div",null)}function M(){var e=(0,I.b3)(),t=(0,a.Z)(e,1)[0],n=(0,o.useState)(0),c=(0,a.Z)(n,2),s=c[0],m=c[1],d=(0,o.useState)(0),f=(0,a.Z)(d,2),g=f[0],Z=f[1];return(0,o.useEffect)((0,r.Z)(l().mark((function e(){var n,r,c,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.token){e.next=9;break}return e.next=3,Promise.all([(0,O.Ix)(t.token),(0,W.N)(t.token)]);case 3:n=e.sent,r=(0,a.Z)(n,2),c=r[0],o=r[1],null!==c.data&&m(c.data),null!==o.data&&Z(o.data.length);case 9:case"end":return e.stop()}}),e)}))),[t.token]),o.createElement(u.Z,{py:3},o.createElement(i.ZP,{container:!0,spacing:3},o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{icon:"leaderboard",title:"Tổng số tài khoản",count:s}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"success",icon:"store",title:"Tổng số tính năng",count:g})))))}n(1527);var j=n(8043);function q(){var e=(0,I.b3)(),t=(0,a.Z)(e,1)[0],n=(0,o.useState)(0),c=(0,a.Z)(n,2),s=c[0],m=c[1],d=(0,o.useState)(0),f=(0,a.Z)(d,2),g=f[0],Z=f[1],E=(0,o.useState)(0),p=(0,a.Z)(E,2),h=p[0],k=p[1];return(0,o.useEffect)((0,r.Z)(l().mark((function e(){var n,r,c,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.token){e.next=11;break}return e.next=3,Promise.all([(0,O.Ix)(t.token),(0,j.z1)({token:t.token,page:0,size:1}),(0,C.kW)({token:t.token,page:0,size:1,status:"active"})]);case 3:n=e.sent,r=(0,a.Z)(n,3),c=r[0],o=r[1],i=r[2],null!==o.data&&Z(o.data.itemCount),null!==c.data&&m(c.data),null!==i.data&&k(i.data.itemCount);case 11:case"end":return e.stop()}}),e)}))),[t.token]),o.createElement(u.Z,{py:3},o.createElement(i.ZP,{container:!0,spacing:3},o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"dark",icon:"weekend",title:"Tổng số chi nhánh",count:g}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"success",icon:"store",title:"Tổng số camera",count:h}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{icon:"leaderboard",title:"Tổng số tài khoản",count:s})))))}var _=n(9678);function B(){var e=(0,I.b3)(),t=(0,a.Z)(e,1)[0],n=(0,o.useState)(0),c=(0,a.Z)(n,2),s=c[0],m=c[1],d=(0,o.useState)(0),f=(0,a.Z)(d,2),g=f[0],Z=f[1],E=(0,o.useState)(0),p=(0,a.Z)(E,2),h=p[0],k=p[1];return(0,o.useEffect)((0,r.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.token){e.next=5;break}return e.next=3,(0,_.lD)({token:t.token});case 3:null!==(n=e.sent).data&&(m(n.data.numberCheckIn),Z(n.data.numberLateTime),k(n.data.numberLateIn));case 5:case"end":return e.stop()}}),e)}))),[t.token]),o.createElement(u.Z,{py:3},o.createElement(i.ZP,{container:!0,spacing:3},o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"dark",icon:"weekend",title:"Số người đã check in",count:s}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"success",icon:"store",title:"Số người bị cảnh báo trong ngày",count:g}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{icon:"leaderboard",title:"Số người vượt quá số lần trong tháng",count:h})))))}var K=n(3334);function Q(){var e=(0,I.b3)(),t=(0,a.Z)(e,2),n=t[0],c=(t[1],(0,o.useState)(0)),s=(0,a.Z)(c,2),m=s[0],d=s[1],f=(0,o.useState)(0),g=(0,a.Z)(f,2),Z=g[0],E=g[1],p=(0,o.useState)(0),h=(0,a.Z)(p,2),k=h[0],x=h[1];return(0,o.useEffect)((0,r.Z)(l().mark((function e(){var t,r,c,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.currentUser){e.next=11;break}return e.next=3,Promise.all([(0,O.Ix)(n.token),(0,j.z1)({token:n.token,page:0,size:1}),(0,C.kW)({token:n.token,page:0,size:1,status:"active"})]);case 3:t=e.sent,r=(0,a.Z)(t,3),c=r[0],o=r[1],i=r[2],null!==o.data&&E(o.data.itemCount),null!==c.data&&d(c.data),null!==i.data&&x(i.data.itemCount);case 11:case"end":return e.stop()}}),e)}))),[n.currentUser]),o.createElement(u.Z,{py:3},o.createElement(i.ZP,{container:!0,spacing:3},o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"dark",icon:"weekend",title:"Tổng số chi nhánh",count:Z}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"success",icon:"store",title:"Tổng số camera",count:k}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{icon:"leaderboard",title:"Tổng số tài khoản",count:m})))))}var Y=n(436);function X(){var e=(0,I.b3)(),t=(0,a.Z)(e,1)[0],n=(0,o.useState)(0),c=(0,a.Z)(n,2),s=c[0],m=c[1],d=(0,o.useState)(0),f=(0,a.Z)(d,2),g=f[0],Z=f[1],E=(0,o.useState)(0),p=(0,a.Z)(E,2),h=p[0],k=p[1],x=(0,Y.P6)(),b=(0,a.Z)(x,2),v=b[0],S=b[1];return(0,o.useEffect)((0,r.Z)(l().mark((function e(){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!0,!t.token){e.next=6;break}return e.next=4,(0,_.am)({token:t.token});case 4:null!==(r=e.sent).data&&n&&(m(r.data.numberAreaRestrictionWarning),Z(r.data.numberNotificationInDay),k(r.data.numberNotificationNotResolve),(0,Y.K2)(S,r.data.numberNotificationNotResolveUsingRing>0));case 6:return e.abrupt("return",(function(){n=!1}));case 7:case"end":return e.stop()}}),e)}))),[t.token,v.toggle]),o.createElement(u.Z,{py:3},o.createElement(i.ZP,{container:!0,spacing:3},o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"dark",icon:"weekend",title:"Số khu vực có cảnh báo",count:s}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"success",icon:"store",title:"Số cảnh báo trong ngày",count:g}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{icon:"leaderboard",title:"Số cảnh báo chưa được xử lý",count:h})))))}function G(){var e=(0,I.b3)(),t=(0,a.Z)(e,2),n=t[0],c=(t[1],(0,o.useState)(0)),s=(0,a.Z)(c,2),m=s[0],d=s[1],f=(0,o.useState)(0),g=(0,a.Z)(f,2),Z=g[0],E=g[1],p=(0,o.useState)(0),h=(0,a.Z)(p,2),k=h[0],x=h[1];return(0,o.useEffect)((0,r.Z)(l().mark((function e(){var t,r,c,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.currentUser){e.next=11;break}return e.next=3,Promise.all([(0,O.Ix)(n.token),(0,j.z1)({token:n.token,page:0,size:1}),(0,C.kW)({token:n.token,page:0,size:1,status:"active"})]);case 3:t=e.sent,r=(0,a.Z)(t,3),c=r[0],o=r[1],i=r[2],null!==o.data&&E(o.data.itemCount),null!==c.data&&d(c.data),null!==i.data&&x(i.data.itemCount);case 11:case"end":return e.stop()}}),e)}))),[n.currentUser]),o.createElement(u.Z,{py:3},o.createElement(i.ZP,{container:!0,spacing:3},o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"dark",icon:"weekend",title:"Tổng số chi nhánh",count:Z}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"success",icon:"store",title:"Tổng số camera",count:k}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{icon:"leaderboard",title:"Tổng số tài khoản",count:m})))))}function V(){var e=(0,I.b3)(),t=(0,a.Z)(e,1)[0],n=(0,o.useState)(0),c=(0,a.Z)(n,2),s=c[0],m=c[1],d=(0,o.useState)(0),f=(0,a.Z)(d,2),g=f[0],Z=f[1],E=(0,o.useState)(0),p=(0,a.Z)(E,2),h=p[0],k=p[1],x=(0,Y.P6)(),b=(0,a.Z)(x,2),v=b[0],S=b[1];return(0,o.useEffect)((0,r.Z)(l().mark((function e(){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!0,!t.token){e.next=6;break}return e.next=4,(0,_.am)({token:t.token});case 4:null!==(r=e.sent).data&&n&&(m(r.data.numberAreaRestrictionWarning),Z(r.data.numberNotificationInDay),k(r.data.numberNotificationNotResolve),(0,Y.K2)(S,r.data.numberNotificationNotResolveUsingRing>0));case 6:return e.abrupt("return",(function(){n=!1}));case 7:case"end":return e.stop()}}),e)}))),[t.token,v.toggle]),o.createElement(u.Z,{py:3},o.createElement(i.ZP,{container:!0,spacing:3},o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"dark",icon:"weekend",title:"Số khu vực có cảnh báo",count:s}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{color:"success",icon:"store",title:"Số cảnh báo trong ngày",count:g}))),o.createElement(i.ZP,{item:!0,xs:12,md:6,lg:4},o.createElement(u.Z,{mb:1.5},o.createElement(D,{icon:"leaderboard",title:"Số cảnh báo chưa được xử lý",count:h})))))}var $=function(){var e,t=(0,I.b3)(),n=(0,a.Z)(t,2),c=n[0],Z=(n[1],(0,o.useState)("")),E=(0,a.Z)(Z,2),p=E[0],k=E[1],x=(0,o.useState)([]),b=(0,a.Z)(x,2),v=b[0],S=b[1],w=(0,o.useState)(!1),P=(0,a.Z)(w,2),y=P[0],T=P[1],R=(0,o.useState)(!1),z=(0,a.Z)(R,2),D=z[0],O=z[1],W=(0,o.useState)(null),J=(0,a.Z)(W,2),A=J[0],F=J[1],j=(0,o.useState)(!1),_=(0,a.Z)(j,2),Y=_[0],$=_[1],ee=(0,o.useState)(!1),te=(0,a.Z)(ee,2),ne=te[0],re=te[1],ae=function(){$(!1)};return(0,o.useEffect)((function(){F(c.token)}),[c.token]),(0,o.useEffect)((function(){A&&(((0,U.Fk)(c.currentUser)||(0,U.QM)(c.currentUser)||(0,U.po)(c.currentUser)||(0,U.hc)(c.currentUser)||(0,U.cE)(c.currentUser)||(0,U.gL)(c.currentUser))&&T(!0),O((0,U.hc)(c.currentUser)||(0,U.gL)(c.currentUser)))}),[A]),(0,o.useEffect)((0,r.Z)(l().mark((function e(){var t,n,r,a,c,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=localStorage.getItem(h.aR))||!A){e.next=14;break}if(n=JSON.parse(t),r=[],!((a=n.map((function(e){return e.camera}))).length>0)){e.next=13;break}return e.next=8,(0,C.kW)({token:A,page:0,size:a.length,cameraIds:a,status:"active"});case 8:null!=(c=e.sent).data&&(o=c.data.data,r=a.map((function(e){var t=o.filter((function(t){return t.id===e}));return t.length>0?t[0]:null}))),S(r),e.next=14;break;case 13:S([]);case 14:case"end":return e.stop()}}),e)}))),[localStorage.getItem(h.aR),A]),(0,o.useEffect)((function(){var e=setInterval((function(){var e,t,n;e=0,t=0,(n=new Date).getHours()==e&&n.getMinutes()==t&&window.location.reload()}),6e4);return function(){return clearInterval(e)}}),[]),(0,o.useEffect)((function(){re(!0)}),[A]),o.createElement(o.Fragment,null,o.createElement(s.Z,null,function(){if(c.token){if((0,U.j5)(c.currentUser))return o.createElement(L,null);if((0,U.OB)(c.currentUser))return o.createElement(M,null);if((0,U.Fk)(c.currentUser))return o.createElement(q,null);if((0,U.QM)(c.currentUser))return o.createElement(B,null);if((0,U.po)(c.currentUser))return o.createElement(Q,null);if((0,U.hc)(c.currentUser))return o.createElement(X,null);if((0,U.cE)(c.currentUser))return o.createElement(G,null);if((0,U.gL)(c.currentUser))return o.createElement(V,null)}return o.createElement("div",null)}(),o.createElement(i.ZP,{container:!0,mt:-1,spacing:2},o.createElement(i.ZP,{item:!0,xs:D?8.5:12,md:D?8.5:12,lg:D?8.5:12},y?o.createElement(u.Z,{display:"flex",flexDirection:"row-reverse"},o.createElement(u.Z,null,o.createElement(m.Z,{title:"Click để hiển thị camera",open:ne,onOpen:function(){re(!0)},onClose:function(){re(!1)},style:{width:"100%"}},o.createElement(d.Z,{size:"large",style:{color:"#7b809a",padding:0},onClick:function(){return $(!0),void k(h.s)},sx:{background:"none"}},o.createElement(f.Z,{fontSize:"large"},"dashboard")))),o.createElement(i.ZP,{container:!0,spacing:2,style:{maxHeight:"68vh",overflowY:"auto"}},v.map((function(e,t){return o.createElement(H,{camera:e,numberInRow:D?2:3})})))):o.createElement("div",null)),D?o.createElement(i.ZP,{item:!0,xs:3.5,md:3.5,lg:3.5},o.createElement(K.Z,null)):o.createElement("div",null))),o.createElement(g.Z,{open:Y,onClose:ae,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},o.createElement(o.Fragment,null,p===h.s?(e=ae,o.createElement(N,{handleClose:e})):o.createElement("div",null))))}},1527:function(e,t,n){n.r(t)}}]);